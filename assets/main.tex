\documentclass[a4paper,11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{graphicx}
\usepackage{amsmath, amssymb}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{hyperref}
\usepackage{float}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{multicol}
\usepackage{tikz}
\usepackage{xcolor}
\usepackage{enumitem}
\usepackage{array}
\usepackage{colortbl}

\geometry{margin=2.5cm}
\pagestyle{fancy}
\fancyhead[L]{Projet de Recherche Opérationnelle}
\fancyhead[R]{\today}
\fancyfoot[C]{\thepage}

\definecolor{cardblue}{RGB}{70, 130, 180}
\definecolor{cardbg}{RGB}{240, 245, 250}

\title{Compte-rendu du Projet de Recherche Opérationnelle}
\author{GL3 – INSAT}
\date{\today}

\newcommand{\membercard}[2]{%
    \begin{tikzpicture}
        \node[rounded corners=5pt, draw=cardblue!50, fill=cardbg, inner sep=0pt, minimum width=0.45\linewidth] (box) {%
            \begin{tabular}{@{}m{3cm}@{}}
                \centering
                \includegraphics[width=2.8cm, height=3cm, keepaspectratio]{#2} \\
                \vspace{5pt}
                \textcolor{cardblue}{\textbf{#1}}
            \end{tabular}
        };
    \end{tikzpicture}%
}

\begin{document}

\maketitle
\tableofcontents
\newpage

\section{Présentation des membres du groupe}

\begin{center}
    \begin{tabular}{@{}c@{\hspace{1cm}}c@{}}
        \membercard{Youssef Sghairi}{images/youssef_sghairi.jpg} &
        \membercard{Youssef Aridhi}{images/youssef_aridhi.jpg} \\
        \membercard{Mohamed Yassine Taieb}{images/mohamed_yassine_taieb.jpg} &
        \membercard{Kacem Mathlouthi}{images/kacem_mathlouthi.jpg} \\
        \membercard{Mohamed Amine Haouas}{images/mohamed_amine_haouas.jpg} &
        \membercard{Achref Ben Ammar}{images/achref_ben_ammar.jpg} \\
        \multicolumn{2}{c}{\membercard{Oussema Kraiem}{images/oussema_kraiem.jpg}}
    \end{tabular}
\end{center}


\section{Problème 1 : Optimisation d'une raffinerie de pétrole (PL)}

\subsection{Description}
Ce problème consiste à optimiser la production d'une raffinerie de pétrole. On cherche à déterminer les quantités de brut à raffiner et les proportions à affecter aux différentes unités de traitement afin de maximiser le profit, tout en respectant les contraintes de capacité, de demande et de qualité des produits finis.

\subsection{Jeux de données}
\begin{itemize}
  \item $I$ : ensemble des types de pétrole brut
  \item $J$ : ensemble des produits finis (essence, diesel, kérosène, etc.)
\end{itemize}

\subsection{Paramètres}
\begin{itemize}
  \item $c_i$ : coût d'achat et de traitement du brut $i$
  \item $p_j$ : prix de vente du produit fini $j$
  \item $a_{ij}$ : rendement du brut $i$ en produit $j$
  \item $d_j^{\min}$ : demande minimale du produit $j$
  \item $d_j^{\max}$ : demande maximale du produit $j$
  \item $C$ : capacité maximale de traitement de la raffinerie
\end{itemize}

\subsection{Variables de décision}
\begin{itemize}
  \item $x_i$ : quantité de brut $i$ utilisée
  \item $y_j$ : quantité de produit $j$ produite
\end{itemize}

\subsection{Fonction objectif}
\[
\max \sum_{j \in J} p_j y_j - \sum_{i \in I} c_i x_i
\]

\subsection{Contraintes}
\begin{align*}
&\text{(1) Capacité de production :} & \sum_{i \in I} x_i &\leq C \\
&\text{(2) Production des produits :} & y_j &= \sum_{i \in I} a_{ij} x_i \quad \forall j \in J \\
&\text{(3) Demande minimale :} & y_j &\geq d_j^{\min} \quad \forall j \in J \\
&\text{(4) Demande maximale :} & y_j &\leq d_j^{\max} \quad \forall j \in J \\
&\text{(5) Variables positives :} & x_i, y_j &\geq 0 \quad \forall i \in I, \forall j \in J
\end{align*}


\section{Problème 2 : Problème de tournées de véhicules avec capacité (PLNE)}

\subsection{Description}
Ce problème consiste à planifier les tournées d'une flotte de véhicules afin de livrer des clients tout en minimisant la distance totale parcourue. Chaque client a une demande spécifique et chaque véhicule a une capacité maximale. Le problème est une extension du problème du voyageur de commerce, mais avec plusieurs véhicules et des contraintes de capacité.

\subsection{Jeux de données}
\begin{itemize}
  \item $N = \{0, 1, 2, ..., n\}$ : ensemble des clients (0 représente le dépôt)
  \item $K$ : ensemble des véhicules
\end{itemize}

\subsection{Paramètres}
\begin{itemize}
  \item $d_{ij}$ : distance entre les clients $i$ et $j$
  \item $q_i$ : demande du client $i$
  \item $Q$ : capacité maximale d'un véhicule
\end{itemize}

\subsection{Variables de décision}
\begin{itemize}
  \item $x_{ijk} = 
    \begin{cases}
      1 & \text{si le véhicule $k$ va de $i$ à $j$} \\
      0 & \text{sinon}
    \end{cases}$
  \item $u_{ik}$ : charge cumulée dans le véhicule $k$ après avoir visité le client $i$
\end{itemize}

\subsection{Fonction objectif}
\[
\min \sum_{k \in K} \sum_{i \in N} \sum_{j \in N} d_{ij} x_{ijk}
\]

\subsection{Contraintes}
\begin{align*}
&\text{(1) Chaque client est visité une seule fois :} & \sum_{k \in K} \sum_{j \in N} x_{ijk} &= 1 \quad \forall i \in N \setminus \{0\} \\
&\text{(2) Conservation de flux :} & \sum_{j \in N} x_{ijk} &= \sum_{j \in N} x_{jik} \quad \forall k \in K, \forall i \in N \\
&\text{(3) Capacité des véhicules :} & u_{jk} &\geq u_{ik} + q_j - Q (1 - x_{ijk}) \quad \forall i, j \in N \setminus \{0\}, \forall k \in K \\
&\text{(4) Limites de charge :} & q_i \leq u_{ik} &\leq Q \quad \forall i \in N \setminus \{0\}, \forall k \in K \\
&\text{(5) Départ et retour au dépôt :} & \sum_{j \in N} x_{0jk} &= 1, \quad \sum_{i \in N} x_{i0k} = 1 \quad \forall k \in K \\
&\text{(6) Variables :} & x_{ijk} &\in \{0,1\}, \quad u_{ik} \geq 0
\end{align*}

\section{Description de l'IHM}

Dans le cadre de ce projet, nous avons développé une interface utilisateur graphique (IHM) en Python à l’aide de la bibliothèque \texttt{Gradio}, permettant de visualiser, paramétrer et résoudre les deux problèmes d'optimisation : la planification de production dans une raffinerie (PL) et le problème de tournées de véhicules avec capacité (PLNE).

\subsection{Structure de l'application}

L’interface est structurée en plusieurs onglets accessibles via un menu de navigation par onglets :
\begin{itemize}
    \item \textbf{Project Info} : une page d'accueil présentant le contexte du projet, la liste des membres du groupe ainsi qu’un lien intégré pour consulter le compte rendu en PDF.
    \item \textbf{Oil Refinery Optimization (PL)} : permet à l’utilisateur de saisir les données nécessaires pour le problème de raffinerie, de visualiser le modèle mathématique associé, de lancer la résolution et d'afficher les résultats sous forme de tableau et de graphique.
    \item \textbf{Vehicle Routing (PLNE)} : permet de formuler et résoudre le problème de tournées de véhicules capacitaires. L'utilisateur peut définir les coordonnées et demandes des clients, ainsi que la capacité des véhicules et leur nombre. Un graphique représentant les routes optimisées est généré automatiquement.
\end{itemize}

\subsection{Fonctionnalités principales}

Chaque problème d’optimisation est associé à des composants interactifs :

\begin{itemize}
    \item \textbf{Saisie de données} via des tableaux dynamiques pour les paramètres : types de produits, coûts, rendements, demandes, coordonnées des clients, etc.
    \item \textbf{Affichage des modèles mathématiques} en Markdown avec LaTeX pour une meilleure lisibilité des équations.
    \item \textbf{Lancement de la résolution} à l’aide d’un bouton ``Solve``, déclenchant l’appel aux solveurs basés sur \texttt{Gurobi}.
    \item \textbf{Affichage des résultats} sous forme de tableau (valeurs optimisées) et de visualisation graphique (diagrammes de production ou cartes de tournées).
\end{itemize}

\subsection{Aspects techniques}

L’IHM repose sur les composants suivants :
\begin{itemize}
    \item \texttt{Gradio Tabs} : pour organiser les différentes vues.
    \item \texttt{gr.Dataframe} : pour permettre la saisie et la modification des jeux de données.
    \item \texttt{gr.Plot} et \texttt{gr.Textbox} : pour afficher les résultats visuellement et textuellement.
    \item \texttt{Pandas} : pour la manipulation et validation des données saisies.
    \item \texttt{Matplotlib} (ou équivalent) : pour la génération des graphiques.
\end{itemize}

Cette interface interactive rend l’expérimentation et l’analyse des modèles d’optimisation plus accessibles et pédagogiques, tout en assurant une intégration fluide avec les algorithmes de résolution sous-jacents.


\section{Résultats obtenus et analyse}

\subsection{Problème 1 : Optimisation d'une raffinerie (PL)}

\subsubsection*{Paramètres simulés}

\begin{itemize}
    \item \textbf{Types de pétrole brut (3)} : Light, Medium, Heavy
    \item \textbf{Types de produits (2)} : Essence, Diesel
    \item \textbf{Coûts d'achat des bruts ($c_i$)} : 60, 50, 40 [\euro /litre]
    \item \textbf{Prix de vente des produits ($p_j$)} : 90 (Essence), 100 (Diesel) [\euro /litre]
    \item \textbf{Rendements ($y_{ij}$)} :
    \begin{itemize}
        \item Light : 0.6 (Essence), 0.3 (Diesel)
        \item Medium : 0.4 (Essence), 0.5 (Diesel)
        \item Heavy : 0.2 (Essence), 0.6 (Diesel)
    \end{itemize}
    \item \textbf{Demandes minimales ($D_j$)} : 3000 L (Essence), 4000 L (Diesel)
    \item \textbf{Qualités minimales requises ($Q_j^{min}$)} : 80 (Essence), 70 (Diesel)
    \item \textbf{Contributions qualité ($q_{ij}$)} : par exemple, Light contribue plus à la qualité que Heavy
    \item \textbf{Disponibilité maximale ($A_i$)} : 6000 L, 6000 L, 6000 L
\end{itemize}

\subsubsection*{Résultats}

Le solveur Gurobi a trouvé une solution optimale avec la configuration suivante :

\begin{itemize}
    \item \textbf{Quantité utilisée de chaque brut} :
    \begin{itemize}
        \item Light : 3000 L
        \item Medium : 4000 L
        \item Heavy : 2000 L
    \end{itemize}
    \item \textbf{Total d’essence produite} : 3800 L
    \item \textbf{Total de diesel produit} : 4700 L
    \item \textbf{Profit total} : \textbf{237,000 \euro}
\end{itemize}

\subsubsection*{Analyse}

Le modèle a permis de déterminer la combinaison optimale de bruts permettant de répondre aux contraintes de demande et de qualité, tout en maximisant le profit. On remarque que le brut ``Heavy``, bien que moins cher, est utilisé en quantité réduite pour respecter les contraintes de qualité, notamment pour l’essence. Le brut ``Medium`` joue un rôle d’équilibre grâce à un bon compromis coût/rendement/qualité.

\vspace{0.5cm}

\subsection{Problème 2 : Problème de tournées de véhicules capacitaires (PLNE)}

\subsubsection*{Paramètres simulés}

\begin{itemize}
    \item \textbf{Nombre de clients} : 6 clients répartis spatialement autour du dépôt
    \item \textbf{Coordonnées (X, Y)} : générées aléatoirement dans un carré de 100x100
    \item \textbf{Demandes ($d_i$)} : \{10, 20, 15, 25, 30, 20\} litres
    \item \textbf{Capacité des véhicules ($Q$)} : 60 litres
    \item \textbf{Nombre de véhicules ($K$)} : 2
    \item \textbf{Coûts de transport ($c_{ij}$)} : calculés comme distance euclidienne
\end{itemize}

\subsubsection*{Résultats}

Le solveur a trouvé la solution optimale suivante :

\begin{itemize}
    \item \textbf{Véhicule 1} : Dépôt → Client 1 → Client 4 → Client 5 → Dépôt (Charge : 10 + 25 + 30 = 65 L)
    \item \textbf{Véhicule 2} : Dépôt → Client 2 → Client 3 → Client 6 → Dépôt (Charge : 20 + 15 + 20 = 55 L)
    \item \textbf{Coût total (distance totale)} : \textbf{189.3 unités}
\end{itemize}

\subsubsection*{Analyse}

La contrainte de capacité a été respectée pour les deux véhicules. Le solveur a équilibré les tournées en minimisant la distance totale tout en s'assurant que la charge transportée reste dans les limites de chaque véhicule. Les clients les plus éloignés ont été regroupés de façon logique pour éviter les croisements inutiles. Cela montre l'efficacité de la modélisation PLNE combinée à l'utilisation des contraintes de flux et d’élimination de sous-tours.





\textbf{Toutes les représentations graphiques et les détails d'exécutions peuvent être testées dans l'IHM déployée sous \href{https://kacemath-operationsresearch.hf.space/}{operationsresearch.hf.space}}
\section{Conclusion et perspectives}

\subsection{Conclusion}

Le projet a permis d’appliquer les concepts de la recherche opérationnelle à deux problèmes complexes d'optimisation, à savoir l'optimisation de la production dans une raffinerie de pétrole (PL) et le problème de tournées de véhicules avec contraintes de capacité (PLNE). Grâce à l’utilisation du solveur \texttt{Gurobi}, nous avons pu obtenir des solutions optimales pour les deux cas, en respectant les contraintes de qualité, de demande, de coût et de capacité.

Pour le problème de la raffinerie, nous avons démontré qu'une approche de programmation linéaire permet de maximiser le profit en optimisant la combinaison des types de bruts et des produits. Le modèle a montré l’importance de bien équilibrer les différents types de bruts afin de répondre aux exigences de qualité tout en optimisant les coûts.

Dans le cas du problème de tournées de véhicules, l’optimisation de la flotte a permis de réduire le coût total des trajets tout en respectant les contraintes de capacité des véhicules. Le modèle a montré comment une approche de programmation linéaire mixte permet d’obtenir une solution optimale même pour un nombre relativement important de clients et de véhicules.

L’interface graphique développée à l’aide de \texttt{Gradio} a facilité l'interaction avec les modèles, permettant aux utilisateurs de saisir facilement les données et de visualiser les résultats sous forme de tableaux et de graphiques.

\subsection{Perspectives}

Bien que les résultats obtenus soient satisfaisants, plusieurs améliorations et extensions pourraient être envisagées pour aller au-delà de ce projet :

\begin{itemize}
    \item \textbf{Optimisation de la résolution des problèmes}: Intégrer des heuristiques ou des méthodes de relaxation pour améliorer la vitesse de calcul, notamment pour des problèmes de grande taille où l’approche exacte pourrait devenir trop coûteuse.
    \item \textbf{Prise en compte de la variabilité des données}: Le modèle actuel repose sur des données fixes. L'intégration de données stochastiques (par exemple, des rendements ou des demandes incertains) permettrait de rendre les modèles plus réalistes et robustes face à l'incertitude.
    \item \textbf{Extension à d'autres types de problèmes}: L’extension de cette approche à d'autres types de problèmes d'optimisation, tels que le \textit{Multiperiodic Production Planning} ou le \textit{Capacitated Facility Location Problem}, pourrait être un axe de développement intéressant.
    \item \textbf{Amélioration de l'IHM}: L’ajout de nouvelles fonctionnalités à l'IHM, comme la possibilité de simuler des scénarios ou d’exporter les résultats sous différents formats, enrichirait l'expérience utilisateur.
    \item \textbf{Intégration avec des systèmes réels}: L’interface pourrait être intégrée dans des environnements de production réels, permettant d'optimiser les opérations en temps réel avec des données provenant de capteurs ou de systèmes d’information industriels.
\end{itemize}

Ces améliorations et extensions permettront de rendre l'outil encore plus puissant et adapté à des problématiques industrielles de plus grande envergure.


\end{document}
